<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="garbled.link - Your utility hub with tools like notes, timers, code editors, and more.">
  <meta name="author" content="garbledhamster">

  <!-- Favicons -->
  <link rel="icon" href="https://garbled.link/assets/images/icons/favicon-16x16.png" sizes="16x16" type="image/png">
  <link rel="icon" href="https://garbled.link/assets/images/icons/favicon-32x32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="https://garbled.link/assets/images/icons/android-chrome-192x192.png" sizes="192x192" type="image/png">
  <link rel="icon" href="https://garbled.link/assets/images/icons/android-chrome-512x512.png" sizes="512x512" type="image/png">
  <link rel="apple-touch-icon" href="https://garbled.link/assets/images/icons/apple-touch-icon.png">
  <link rel="manifest" href="https://garbled.link/manifest.json">

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="garbled.link - Your Personal Utility Belt">
  <meta property="og:description" content="Simplify your workflow with tools like password generators, GUID creators, and code trimmers.">
  <meta property="og:image" content="https://garbled.link/assets/images/icons/android-chrome-192x192.png">
  <meta property="og:url" content="https://garbled.link">
  <meta property="og:type" content="website">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="garbled.link - Your Personal Utility Belt">
  <meta name="twitter:description" content="Simplify your workflow with tools like password generators, GUID creators, and code trimmers.">
  <meta name="twitter:image" content="https://garbled.link/assets/images/icons/android-chrome-192x192.png">

  <title>garbled.link</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Tag Manager -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SCSZYHSEDL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-SCSZYHSEDL');
  </script>
</head>

<body class="bg-neutral-900 text-neutral-100 font-mono">

  <div class="min-h-screen flex">
    <!-- Tool Selector (Left Column) -->
    <div class="w-1/3 bg-neutral-800 p-4 rounded-md">
      <h1 class="text-xl font-bold mb-4">Utility Belt</h1>
      <ul class="space-y-3">
        <li><button class="w-full text-left hover:text-primary-500 transition">1. Notes</button></li>
        <li><button class="w-full text-left hover:text-primary-500 transition">2. Tasks</button></li>
        <li><button class="w-full text-left hover:text-primary-500 transition">3. Timers</button></li>
        <li><button class="w-full text-left hover:text-primary-500 transition">4. Text Editor</button></li>
        <li><button class="w-full text-left hover:text-primary-500 transition">5. Password Generator</button></li>
        <li><button class="w-full text-left hover:text-primary-500 transition">6. GUID Generator</button></li>
        <li><button class="w-full text-left hover:text-primary-500 transition">7. Code Editor</button></li>
        <li><button class="w-full text-left hover:text-primary-500 transition">8. Code Trimmer</button></li>
      </ul>
    </div>

    <!-- Main Window (Right Column) -->
    <div class="w-2/3 bg-neutral-700 p-6 rounded-md overflow-y-auto h-screen">
      <h2 class="text-2xl font-bold mb-4">Welcome to garbled.link</h2>
      <p class="mb-4">This space will display the tool content. Below is the integrated Google Login system:</p>

      <!-- Firebase Login System -->
      <div class="bg-neutral-600 p-4 rounded-md mb-6">
        <h3 class="text-lg font-bold mb-4">Google Login System</h3>
        <!-- Loading Indicator -->
        <div id="loading" class="text-gray-400 mb-4">Checking authentication status...</div>

        <!-- User Info -->
        <div id="info" class="hidden text-green-500 mb-4 font-semibold"></div>
        <div id="user" class="hidden mt-4 flex flex-col items-center">
          <img id="user-photo" class="w-16 h-16 rounded-full mb-2" src="" alt="Profile Picture">
          <p id="user-name" class="text-sm"></p>
        </div>

        <!-- Login and Logout Buttons -->
        <button id="login" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-full mt-4">
          Login with Google
        </button>
        <button id="logout" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded w-full mt-4 hidden">
          Logout
        </button>
      </div>
    </div>
  </div>

  <!-- Firebase Authentication Script -->
  <script type="module">
    // Import Firebase functions
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";

    // Your Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBIOLZo71m_MqtMMLYCBxSfy-ejBOtzN0I",
      authDomain: "garbled-link.firebaseapp.com",
      projectId: "garbled-link",
      storageBucket: "garbled-link.appspot.com",
      messagingSenderId: "949577796525",
      appId: "1:949577796525:web:b08dcabdc6cd53eeda2f24"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const provider = new GoogleAuthProvider();

    // DOM Elements
    const $login = document.getElementById('login');
    const $logout = document.getElementById('logout');
    const $loading = document.getElementById('loading');
    const $info = document.getElementById('info');
    const $user = document.getElementById('user');
    const $userPhoto = document.getElementById('user-photo');
    const $userName = document.getElementById('user-name');

    // Login with Google
    $login.addEventListener('click', () => {
      signInWithPopup(auth, provider)
        .then((result) => {
          console.log("Logged in as:", result.user.displayName);
        })
        .catch((error) => {
          console.error("Login failed:", error.message);
        });
    });

    // Logout
    $logout.addEventListener('click', () => {
      signOut(auth)
        .then(() => {
          console.log("User logged out");
        })
        .catch((error) => {
          console.error("Logout failed:", error.message);
        });
    });

    // Handle Authentication State Changes
    onAuthStateChanged(auth, (user) => {
      if (user) {
        $loading.classList.add('hidden');
        $info.textContent = `Welcome, ${user.displayName}!`;
        $info.classList.remove('hidden');
        $userPhoto.src = user.photoURL;
        $userName.textContent = user.displayName;
        $user.classList.remove('hidden');
        $login.classList.add('hidden');
        $logout.classList.remove('hidden');
      } else {
        $loading.classList.add('hidden');
        $info.classList.add('hidden');
        $user.classList.add('hidden');
        $login.classList.remove('hidden');
        $logout.classList.add('hidden');
      }
    });
  </script>

</body>

</html>
